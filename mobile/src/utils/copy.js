export const UI_TEXT = {
  actions: {
    retry: 'ë‹¤ì‹œ ì‹œë„',
    search: 'ê²€ìƒ‰',
    add: 'ì¶”ê°€',
    addProgress: 'ì²˜ë¦¬ ì¤‘...',
    allRead: 'ì „ì²´ ì½ìŒ',
    allReadProgress: 'ì²˜ë¦¬ ì¤‘...',
    signup: 'íšŒì›ê°€ìž…',
    login: 'ë¡œê·¸ì¸',
    delete: 'ì‚­ì œ',
    deleteProgress: 'ì‚­ì œ ì¤‘...',
    logout: 'ë¡œê·¸ì•„ì›ƒ',
    appSummary: 'ìš”ì•½ì„ ìƒì„± ì¤‘...',
    openProduct: 'ðŸ›’ ìƒí’ˆ ë³´ëŸ¬ê°€ê¸°',
    openSource: 'ðŸ”— ì›ë¬¸ ë³´ê¸°',
  },
  app: {
    brand: 'DealMoa',
    tagline: 'í•«ë”œ ëª¨ì•„ë³´ê¸°',
  },
  loading: {
    default: 'ë¡œë”© ì¤‘...',
    deals: 'ë”œì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...',
    search: 'ê²€ìƒ‰ ì¤‘...',
    bookmarks: 'ë¶ë§ˆí¬ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...',
    notifications: 'ì•Œë¦¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...',
    keywords: 'í‚¤ì›Œë“œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...',
    deal: 'ë”œ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...',
    appInit: 'ì•± ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ì¤‘...',
    summary: 'ìš”ì•½ ìƒì„± ì¤‘...',
  },
  empty: {
    deals: 'ë”œì´ ì—†ìŠµë‹ˆë‹¤',
    search: 'ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤',
    bookmarks: 'ë¶ë§ˆí¬í•œ ë”œì´ ì—†ìŠµë‹ˆë‹¤',
    bookmarksHint: 'ë§ˆìŒì— ë“œëŠ” ë”œì„ ì €ìž¥í•´ë³´ì„¸ìš”',
    notifications: 'ìƒˆ ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤',
    notificationHint: 'ë”œ ì•Œë¦¼ì´ ì˜¤ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤',
    keywords: 'ì•„ì§ ë“±ë¡ëœ í‚¤ì›Œë“œê°€ ì—†ìŠµë‹ˆë‹¤',
    keywordHint: 'í¬í•¨/ì œì™¸ í‚¤ì›Œë“œë¥¼ í•˜ë‚˜ì”© ì¶”ê°€í•˜ë©´ ì•Œë¦¼ì„ ë” ì •í™•í•˜ê²Œ ë°›ì„ ìˆ˜ ìžˆì–´ìš”.',
    keywordCta: 'í‚¤ì›Œë“œ ì¶”ê°€í•˜ê¸°',
    keywordInputPlaceholder: 'í‚¤ì›Œë“œ ìž…ë ¥ (ì˜ˆ: ë§¥ë¶)',
    searchPlaceholder: 'ë”œ ê²€ìƒ‰ (ì˜ˆ: RTX4090)',
  },
  errors: {
    unexpected: 'ìš”ì²­ì„ ì²˜ë¦¬í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.',
    network: {
      timeout: 'ìš”ì²­ì´ ë„ˆë¬´ ì˜¤ëž˜ ê±¸ë¦½ë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.',
      offline: 'ë„¤íŠ¸ì›Œí¬ ìƒíƒœë¥¼ í™•ì¸í•´ ì£¼ì„¸ìš”.',
      unreachable: 'ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ìž ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.',
    },
    validation: {
      request: 'ìš”ì²­ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.',
      input: 'ìž…ë ¥ê°’ì„ í™•ì¸í•´ ì£¼ì„¸ìš”.',
      conflict: 'ì´ë¯¸ ì²˜ë¦¬ëœ ìš”ì²­ìž…ë‹ˆë‹¤.',
      exists: 'ì´ë¯¸ ë“±ë¡ëœ í•­ëª©ìž…ë‹ˆë‹¤.',
    },
    server: {
      unavailable: 'í˜„ìž¬ ì„œë²„ì— ì¼ì‹œì ì¸ ë¬¸ì œê°€ ìžˆìŠµë‹ˆë‹¤. ìž ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.',
      timeout: 'ìš”ì²­ ì²˜ë¦¬ ì¤‘ ì„œë²„ ì‘ë‹µì´ ì§€ì—°ë˜ì—ˆìŠµë‹ˆë‹¤.',
    },
    deals: {
      loadFail: 'ë”œ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.',
      invalid: 'ë”œ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
      notFound: 'ë”œ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.',
      unavailable: 'ë”œì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
    },
    search: {
      required: 'ê²€ìƒ‰ì–´ë¥¼ ìž…ë ¥í•´ ì£¼ì„¸ìš”.',
      minLength: 'ê²€ìƒ‰ì–´ëŠ” 2ìž ì´ìƒ ìž…ë ¥í•´ ì£¼ì„¸ìš”.',
      fail: 'ê²€ìƒ‰ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.',
    },
    bookmark: {
      actionFail: 'ë¶ë§ˆí¬ ì²˜ë¦¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.',
      deleteFail: 'ë¶ë§ˆí¬ ì‚­ì œ ì‹¤íŒ¨',
      invalidTarget: 'ë¶ë§ˆí¬ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
      missingId: 'ë¶ë§ˆí¬ IDë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ìƒˆë¡œê³ ì¹¨ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.',
      fetchFail: 'ë¶ë§ˆí¬ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.',
    },
    keyword: {
      loadFail: 'í‚¤ì›Œë“œë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.',
      required: 'í‚¤ì›Œë“œë¥¼ ìž…ë ¥í•´ ì£¼ì„¸ìš”.',
      duplicate: 'ì´ë¯¸ ë“±ë¡ëœ í‚¤ì›Œë“œìž…ë‹ˆë‹¤.',
      maxCount: 'í‚¤ì›Œë“œëŠ” ìµœëŒ€ 20ê°œê¹Œì§€ë§Œ ë“±ë¡í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.',
      addFail: 'í‚¤ì›Œë“œ ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.',
      deleteFail: 'í‚¤ì›Œë“œ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.',
      statusFail: 'ìƒíƒœ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.',
      addFailWithReason: 'í‚¤ì›Œë“œ ì¶”ê°€ ì‹¤íŒ¨',
      deleteFailWithReason: 'í‚¤ì›Œë“œ ì‚­ì œ ì‹¤íŒ¨',
      statusFailWithReason: 'í‚¤ì›Œë“œ ìƒíƒœ ë³€ê²½ ì‹¤íŒ¨',
    },
    notification: {
      loadFail: 'ì•Œë¦¼ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.',
      markReadFail: 'ì½ìŒ ì²˜ë¦¬ ì‹¤íŒ¨',
      markAllFail: 'ì „ì²´ ì½ìŒ ì²˜ë¦¬ ì‹¤íŒ¨',
    },
    auth: {
      loginFail: 'ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.',
      signupFail: 'íšŒì›ê°€ìž…ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.',
      inputErrorTitle: 'ìž…ë ¥ ì˜¤ë¥˜',
      inputErrorMessage: 'ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ìž…ë ¥í•´ ì£¼ì„¸ìš”.',
      inputPasswordErrorMessage: 'ë¹„ë°€ë²ˆí˜¸ëŠ” 6ìž ì´ìƒ ìž…ë ¥í•´ ì£¼ì„¸ìš”.',
      logoutTitle: 'ë¡œê·¸ì•„ì›ƒ',
      logoutMessage: 'ì •ë§ ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
      cancel: 'ì·¨ì†Œ',
    },
  },
  auth: {
    title: 'DealMoa',
    subtitle: 'í•«ë”œ ì•Œë¦¼ê³¼ ë¶ë§ˆí¬ë¥¼ ì‹œìž‘í•˜ì„¸ìš”',
    emailPlaceholder: 'ì´ë©”ì¼',
    passwordPlaceholder: 'ë¹„ë°€ë²ˆí˜¸ (ìµœì†Œ 6ìž)',
    passwordMinLength: 6,
    usernamePlaceholder: 'ì‚¬ìš©ìžëª… (ì„ íƒ)',
    switchToLoginText: 'ì´ë¯¸ ê³„ì •ì´ ìžˆë‚˜ìš”? ë¡œê·¸ì¸',
    switchToSignupText: 'ê³„ì •ì´ ì—†ë‚˜ìš”? íšŒì›ê°€ìž…',
  },
  settings: {
    title: 'âš™ï¸ ì„¤ì •',
    sectionTitleUser: 'ì‚¬ìš©ìž ì •ë³´',
    sectionTitleNotifications: 'ì•Œë¦¼ ì„¤ì •',
    sectionTitleApp: 'ì•± ì •ë³´',
    keywordMenu: 'ðŸ”” í‚¤ì›Œë“œ ê´€ë¦¬',
    notificationMenu: 'ðŸ“¬ ì•Œë¦¼ ë‚´ì—­',
    versionLabel: 'ë²„ì „',
    termsMenu: 'ì´ìš©ì•½ê´€',
    privacyMenu: 'ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨',
    openSourceLicenseMenu: 'ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ì„ ìŠ¤',
    footerText: 'DealMoa - í•«ë”œ ëª¨ì•„ë³´ê¸°',
    footerCopyright: 'Â© 2026 DealMoa',
  },
  dealDetail: {
    sectionTitleSource: 'ðŸª íŒë§¤ì²˜',
    sectionTitleSummary: 'ðŸ¤– AI ìš”ì•½',
    sectionTitleDescription: 'ðŸ“ ìƒì„¸ ë‚´ìš©',
    sectionTitleStats: 'ðŸ“Š í†µê³„',
    aiSummaryBadge: 'ðŸ¤– AI ìš”ì•½',
    newBadge: 'NEW',
    statUpvotes: 'ì¶”ì²œ',
    statComments: 'ëŒ“ê¸€',
    statViews: 'ì¡°íšŒ',
    statBookmarks: 'ë¶ë§ˆí¬',
  },
  a11y: {
    retryError: 'ì˜¤ë¥˜ ë‹¤ì‹œ ì‹œë„',
    retryHint: 'ì‹¤íŒ¨í•œ ìž‘ì—…ì„ ë‹¤ì‹œ ì‹œë„í•©ë‹ˆë‹¤',
    keyword: {
      item: 'í‚¤ì›Œë“œ í•­ëª©',
      typeInclusion: 'í¬í•¨',
      typeExclusion: 'ì œì™¸',
      typeValueOn: 'ì¼œì§',
      typeValueOff: 'êº¼ì§',
      inactiveLabel: 'ë¹„í™œì„±',
      badgeInclusion: 'í¬í•¨',
      badgeExclusion: 'ì œì™¸',
      inputLabel: 'í‚¤ì›Œë“œ ìž…ë ¥',
      inputHint: 'ë“±ë¡í•  í‚¤ì›Œë“œë¥¼ ìž…ë ¥í•œ ë‹¤ìŒ ì¶”ê°€ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.',
      inputEmptyHint: 'ìƒˆ í‚¤ì›Œë“œ ìž…ë ¥ì°½ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.',
      typeInclusionLabel: 'í¬í•¨ í‚¤ì›Œë“œ',
      typeExclusionLabel: 'ì œì™¸ í‚¤ì›Œë“œ',
      typeButtonHint: 'í•´ë‹¹ íƒ€ìž…ìœ¼ë¡œ ìƒˆ í‚¤ì›Œë“œë¥¼ ë“±ë¡í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.',
      addButtonLabel: 'í‚¤ì›Œë“œ ì¶”ê°€',
      addButtonHint: 'í˜„ìž¬ ì„ íƒí•œ íƒ€ìž…ìœ¼ë¡œ í‚¤ì›Œë“œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.',
      toggleLabel: 'í‚¤ì›Œë“œ ìƒíƒœ í† ê¸€',
      toggleOnHint: 'í˜„ìž¬ í‚¤ì›Œë“œê°€ ë¹„í™œì„± ìƒíƒœìž…ë‹ˆë‹¤. íƒ­í•˜ë©´ í‚¤ì›Œë“œ ì•Œë¦¼ì´ ë‹¤ì‹œ ì ìš©ë©ë‹ˆë‹¤.',
      toggleOffHint: 'í˜„ìž¬ í‚¤ì›Œë“œê°€ í™œì„± ìƒíƒœìž…ë‹ˆë‹¤. íƒ­í•˜ë©´ í‚¤ì›Œë“œ ì•Œë¦¼ì´ ì¼ì‹œì¤‘ì§€ë©ë‹ˆë‹¤.',
      deleteLabel: 'í‚¤ì›Œë“œ ì‚­ì œ',
      deleteHint: 'í‚¤ì›Œë“œë¥¼ ëª©ë¡ì—ì„œ ì œê±°í•©ë‹ˆë‹¤.',
      processingHint: 'ìž‘ì—…ì´ ì²˜ë¦¬ ì¤‘ìž…ë‹ˆë‹¤.',
      emptyActionLabel: 'í‚¤ì›Œë“œ ìž…ë ¥í•˜ê¸°',
      emptyActionHint: 'í‚¤ì›Œë“œ ìž…ë ¥ì°½ìœ¼ë¡œ ì´ë™í•´ ë°”ë¡œ ë“±ë¡í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.',
    },
    notification: {
      itemLabel: 'ì•Œë¦¼ í•­ëª©',
      unreadItemLabel: 'ë¯¸í™•ì¸ ì•Œë¦¼',
      readItemLabel: 'ì½ì€ ì•Œë¦¼',
      itemUnreadHint: 'íƒ­í•˜ë©´ ì½ìŒ ì²˜ë¦¬ í›„ ìƒì„¸ í™”ë©´ìœ¼ë¡œ ì´ë™í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.',
      itemReadHint: 'íƒ­í•´ë„ ì´ë¯¸ ì½ì€ ì•Œë¦¼ìž…ë‹ˆë‹¤.',
      markAllLabel: 'ì „ì²´ ì½ìŒ ì²˜ë¦¬',
      markAllHint: 'ëª©ë¡ì˜ ë¯¸í™•ì¸ ì•Œë¦¼ì„ ëª¨ë‘ ì½ìŒ ì²˜ë¦¬í•©ë‹ˆë‹¤.',
      markAllDisabledHint: 'í˜„ìž¬ ì²˜ë¦¬ ê°€ëŠ¥í•œ ë¯¸í™•ì¸ ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤.',
      markInProgress: 'ì•Œë¦¼ ì²˜ë¦¬ ì¤‘ìž…ë‹ˆë‹¤.',
    },
  },
};

const normalizeErrorStatus = (error) => {
  const status = error?.response?.status;
  if (!status || typeof status !== 'number') {
    return null;
  }
  return status;
};

const getErrorKind = (error) => {
  const code = error?.code;
  if (!error?.response) {
    if (code === 'ECONNABORTED' || code === 'ETIMEDOUT') {
      return 'network';
    }
    return 'network';
  }

  const status = normalizeErrorStatus(error);
  if (status >= 500) {
    return 'server';
  }
  if (status === 400 || status === 401 || status === 403 || status === 404 || status === 409 || status === 422) {
    return 'validation';
  }

  return 'unknown';
};

const getErrorMessageByKind = (error, fallback = UI_TEXT.errors.unexpected, overrideByKind = {}) => {
  if (error?.code === 'ECONNABORTED' || error?.code === 'ETIMEDOUT') {
    return UI_TEXT.errors.network.timeout;
  }

  const kind = getErrorKind(error);
  if (kind === 'network') {
    return overrideByKind.network || UI_TEXT.errors.network.unreachable;
  }
  if (kind === 'validation') {
    return overrideByKind.validation || UI_TEXT.errors.validation.request;
  }
  if (kind === 'server') {
    return overrideByKind.server || UI_TEXT.errors.server.unavailable;
  }

  return fallback;
};

const resolveErrorDetail = (detail) => {
  if (!detail) return null;

  if (typeof detail === 'string') {
    return detail.trim() || null;
  }

  if (Array.isArray(detail)) {
    const messages = detail
      .map((item) => {
        if (!item) return null;
        if (typeof item === 'string') return item.trim();
        if (typeof item === 'object') {
          return (
            item.detail ||
            item.message ||
            item.msg ||
            item.error ||
            null
          );
        }
        return null;
      })
      .filter(Boolean)
      .map((item) => (typeof item === 'string' ? item.trim() : ''))
      .filter(Boolean);

    return messages.length ? messages.join(', ') : null;
  }

  if (typeof detail === 'object') {
    return (
      detail.detail ||
      detail.message ||
      detail.error ||
      null
    );
  }

  return null;
};

const hasKoreanText = (value) =>
  typeof value === 'string' && /[ê°€-íž£]/.test(value);

export const resolveRequestError = (
  error,
  fallback = UI_TEXT.errors.unexpected,
  options = {},
) => {
  const detail = resolveErrorDetail(error?.response?.data?.detail);
  const overrideByKind = options.byType || {};

  if (detail && hasKoreanText(detail)) {
    return detail.trim();
  }
  if (typeof error?.message === 'string' && error.message.trim()) {
    const normalized = error.message.toLowerCase();
    if (hasKoreanText(error.message)) {
      return error.message.trim();
    }
    if (error?.code === 'ERR_BAD_RESPONSE' && normalized.includes('timeout')) {
      return UI_TEXT.errors.server.timeout;
    }
    if (normalized.includes('network')) {
      return UI_TEXT.errors.network.offline;
    }
  }

  if (!error?.response || (error?.code && !error.message)) {
    return getErrorMessageByKind(error, fallback, overrideByKind);
  }

  return getErrorMessageByKind(error, fallback, overrideByKind);
};

export const resolveRequestErrorInfo = (
  error,
  fallback = UI_TEXT.errors.unexpected,
  options = {},
) => ({
  kind: getErrorKind(error),
  message: resolveRequestError(error, fallback, options),
});
